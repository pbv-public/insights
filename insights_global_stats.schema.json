{
  "$id": "/insights/global_stats",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "description": "Contains global, overarching statistics about the game.",
  "properties": {
    "avg_shots": {
      "description": "Represents the average number of shots per rally.",
      "minimum": 1,
      "type": "number"
    },
    "game_outcome": {
      "additionalProperties": false,
      "description": "the final score and who won",
      "properties": {
        "team_scores": {
          "additionalProperties": false,
          "description": "Final scores for each team. Teams that don't have a score are omitted. The key is /types/team_id.",
          "patternProperties": {
            "^0|1$": {
              "description": "Final points for the team.",
              "minimum": 0,
              "type": "integer"
            }
          },
          "type": "object"
        },
        "winning_team_id": {
          "$ref": "/types/team_id",
          "description": "The winning team's ID. Omitted if it was a tie.",
          "title": "Team ID"
        }
      },
      "required": [
        "team_scores"
      ],
      "title": "Game Outcome",
      "type": "object"
    },
    "highlights": {
      "description": "Stores highlight-worthy rallies by rally_idx.",
      "items": {
        "minimum": 0,
        "type": "integer"
      },
      "type": "array"
    },
    "kitchen_rallies": {
      "description": "Represents the number of rallies where all players get to the kitchen.",
      "minimum": 0,
      "type": "integer"
    },
    "longest_rally": {
      "additionalProperties": false,
      "description": "stats about the longest rally in the game",
      "properties": {
        "num_shots": {
          "description": "Number of shots in the longest rally.",
          "type": "integer"
        },
        "rally_idx": {
          "description": "The rally which was the longest (0 is the first rally in the game).",
          "minimum": 0,
          "type": "integer"
        }
      },
      "required": [
        "rally_idx",
        "num_shots"
      ],
      "title": "Longest Rally",
      "type": "object"
    },
    "num_rallies": {
      "description": "Represents the total number of rallies in the game.",
      "minimum": 1,
      "type": "integer"
    },
    "team_percentage_to_kitchen": {
      "description": "Percent of rallies where all players on a team successfully arrived at the kitchen.",
      "items": {
        "$ref": "/types/percentage",
        "description": "A percentage value between 0 and 100.",
        "title": "Percentage"
      },
      "maxItems": 2,
      "minItems": 2,
      "type": "array"
    }
  },
  "required": [
    "game_outcome",
    "num_rallies",
    "kitchen_rallies",
    "avg_shots",
    "longest_rally",
    "highlights",
    "team_percentage_to_kitchen"
  ],
  "title": "Global Stats",
  "type": "object"
}